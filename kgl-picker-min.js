$((()=>{$(".kgl-collapse").each((function(){$(this).data("height",$(this).outerHeight()+16),$(this).hasClass("open")||$(this).outerHeight(0)}));const t=$(".kgl-selector span");Array.prototype.sort.bind(t)(((t,e)=>{const i=$(t).data("sort"),s=$(e).data("sort");return i<s?-1:i>s?1:0})),$(".kgl-selector").append(t),$(".kgl-title").on("click",(function(){if($(this).hasClass("open"))return;const t=$(this).siblings(".kgl-collapse.open"),e=$(this).siblings(".open");t.outerHeight(0),e.removeClass("open"),$(this).addClass("open");const i=$(this).next();i.addClass("open").outerHeight(i.data("height"))})),$(".kgl-color").on("mouseover",(function(){$(".kgl-popup",this).addClass("pop")})).on("mouseleave",(function(){$(".kgl-popup",this).removeClass("pop")})),$(".kgl-color").on("click",(function(){const t=$(this).closest(".kgl-picker"),e=$(".kgl-selector",t);if(!$(":checked",e).length)return;const i=$(":checked",e),s=i.val(),a=i.data("wapf"),o=$(this).data("color");$(`[data-field-id=${a}]`).val($(this).data("ral")),$(`[id=${s}]`).css({fill:o}).find("*").css({fill:o})})),$(".kgl-option input").on("change",(function(){const t=$(this).is(":checked"),e=$(this).data("id"),i=$(this).data("wapf");$(`#kgl-${e}, [for=kgl-${e}]`).attr("hidden",!t),$(`[id=${e}]`).attr("style","display: "+(t?"initial":"none")),$(`input[data-field-id=${i}]`).prop("checked",t);let s=parseInt($(".kgl-price").data("base"));$("input[data-field-id]").each((function(){$(this).is(":checked")&&(s+=parseInt($(this).data("wapf-price")))})),$(".kgl-price").text(`Â£${s}`)}));let e=!1;$("#kgl-form").on("submit",(function(t){if(e)return;t.preventDefault();let i=!1;$("input[id^=ral-color-]",this).each((function(){if(i)return;const t=$(`[data-id=${$(this).data("selector")}]`);(t.length&&t.is(":checked")&&!$(this).val()||!t.length&&!$(this).val())&&(i=$(this).data("error"))})),i?window.alert(i):(e=!0,$(this).trigger("submit"))}))}));